<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Results</title>
    <link rel="stylesheet" href="./styles/style.css"> <!-- Bootstrap Library CSS CDN go here -->
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.2/dist/css/bootstrap.min.css" rel="stylesheet"
        integrity="sha384-T3c6CoIi6uLrA9TneNEoa7RxnatzjcDSCmG1MXxSR1GAsXEV/Dwwykc2MPK8M2HN" crossorigin="anonymous">
    <!-- Boostrap Library JS CDN  go here -->
    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.2/dist/js/bootstrap.bundle.min.js"
        integrity="sha384-C6RzsynM9kWDrMNeT87bh95OGNyZPhcTNXj1NW7RuBCsyN/o0jlpcV8Qyq46cDfL" crossorigin="anonymous">
        </script>

    <!-------------------------------------------------------->
    <!-- Firebase 8 Library related CSS, JS, JQuery go here -->
    <!-------------------------------------------------------->
    <script src="https://ajax.googleapis.com/ajax/libs/jquery/3.5.1/jquery.min.js"></script>
    <script src="https://www.gstatic.com/firebasejs/8.10.0/firebase-app.js"></script>
    <script src="https://www.gstatic.com/firebasejs/8.10.0/firebase-firestore.js"></script>
    <script src="https://www.gstatic.com/firebasejs/8.10.0/firebase-auth.js"></script>
    <script src="https://www.gstatic.com/firebasejs/ui/4.8.1/firebase-ui-auth.js"></script>
    <link type="text/css" rel="stylesheet" href="https://www.gstatic.com/firebasejs/ui/4.8.1/firebase-ui-auth.css" />
    <script src="https://www.gstatic.com/firebasejs/8.10.0/firebase-storage.js"></script>

    <!-- Other libraries go here -->

    <!-- Link to styles of your own -->
    <!-- <link rel="stylesheet" href="./styles/style.css"> -->

</head>

<body>
    <nav id="navbarPlaceholder"></nav>
    <div id="results-container">
        <div id="results-banner">
        </div>
        <div id="results-icon">
            <img alt="profile-icon" src="./images/profile-user.png">
            <span>Hi Ravneet,</user><br/>Your results are here.</span>
        </div>
        <div id="content">

        </div>
    </div>
    <nav id="footerPlaceholder"></nav>
    <script>
        // Fetch data from the Node.js server
        fetch('http://127.0.0.1:8000')
            .then(response => response.json())
            .then(data => {
                console.log(data); // Logs the data to the console

                // Display the data on the page
                const contentDiv = document.getElementById('content');

                // Construct the info to display (title and company)
                // message = "";
                // data.forEach(doc => {
                //     console.log(doc.title);
                //     message = message + "<p> " + doc.title + " " +
                //         doc.company_name + " " + "<a href=" + doc.share_link 
                //          + ">link</a>" + " </p>"
                // })

                message = "";
                data.forEach(doc => {
                    console.log(doc.title);
                    message = message + "<div class=" + "card>" + "<img src=" +doc.thumbnail + "<p>" + "<span class=" + "job-title>" 
                        + doc.title + "</span>" +
                        doc.company_name + "<br/>" + "<a href=" + doc.share_link 
                         + ">Apply Now!</a>" + " </p></div><br/>"
                })

                // Display the final string which includes all the jobs
                contentDiv.innerHTML = message;
            })
            .catch(error => console.error('Error fetching data:', error));
    </script>
    <script src="./scripts/firebaseAPI_BBY06.js"></script>
    <script src="./scripts/skeleton.js"></script>
    <script src="./scripts/script.js"></script>
</body>

</html>

